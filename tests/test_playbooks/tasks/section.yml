---
- name: "Ensure state of section: {{ name }}"
  section:
    server_url: "{{ phpipam_server_url }}"
    app_id: "{{ phpipam_app_id }}"
    username: "{{ phpipam_username }}"
    password: "{{ phpipam_password }}"
    name: "{{ section.name }}"
    description: "{{ section_description | default(omit) }}"
    parent: "{{ section_parent | default(omit) }}"
    permissions: "{{ section_permissions | default(omit) }}"
    strict_mode: "{{ section_strict_mode | default(omit) }}"
    subnet_ordering: "{{ section_subnet_ordering | default(omit) }}"
    list_order: "{{ section_list_order | default(omit) }}"
    show_vlan: "{{ section_show_vlan | default(omit) }}"
    show_vrf: "{{ section_show_vrf | default(omit) }}"
    show_supernets_only: "{{ section_show_supernets_only | default(omit) }}"
    dns_resolver: "{{ section_dns_resolver | default(omit) }}"
    state: "{{ section_state | default('present') }}"
