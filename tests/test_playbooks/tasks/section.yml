---
- name: "Ensure state of section: {{ step }}"
  codeaffen.phpipam.section:
    server_url: "{{ phpipam_server_url }}"
    app_id: "{{ phpipam_app_id }}"
    username: "{{ phpipam_username }}"
    password: "{{ phpipam_password }}"
    name: "{{ section.name }}"
    description: "{{ section.description | default(omit) }}"
    parent: "{{ section.parent | default(omit) }}"
    permissions: "{{ section.permissions | default(omit) }}"
    strict_mode: "{{ section.strict_mode | default(omit) }}"
    subnet_ordering: "{{ section.subnet_ordering | default(omit) }}"
    list_order: "{{ section.list_order | default(omit) }}"
    show_vlan: "{{ section.show_vlan | default(omit) }}"
    show_vrf: "{{ section.show_vrf | default(omit) }}"
    show_supernets_only: "{{ section.show_supernets_only | default(omit) }}"
    dns_resolver: "{{ section.dns_resolver | default(omit) }}"
    validate_certs: "{{ section.validate_certs | default('no') }}"
    state: "{{ section.state | default('present') }}"
