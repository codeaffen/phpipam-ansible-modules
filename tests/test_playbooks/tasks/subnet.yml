---
- name: "Ensure state of subnet: {{ name }}"
  subnet:
    server_url: "{{ phpipam_server_url }}"
    app_id: "{{ phpipam_app_id }}"
    username: "{{ phpipam_username }}"
    password: "{{ phpipam_password }}"
    cidr: "{{ subnet.cidr | default(omit) }}"
    subnet: "{{ subnet.subnet | default(omit) }}"
    mask: "{{ subnet.mask | default(omit) }}"
    description: "{{ subnet.description | default(omit) }}"
    section: "{{ subnet.section | default(omit) }}"
    linked_subnet: "{{ subnet_linked_subnet | default(omit) }}"
    vlan_id: "{{ subnet_vlan_id | default(omit) }}"
    vrf_id: "{{ subnet_vrf_id | default(omit) }}"
    master_subnet_cidr: "{{ subnet_master_subnet_cidr | default(omit) }}"
    nameserver: "{{ subnet_nameserver | default(omit) }}"
    show_as_name: "{{ subnet_show_as_name | default(omit) }}"
    permissions: "{{ subnet_permissions | default(omit) }}"
    dns_recursive: "{{ subnet_dns_recursive | default(omit) }}"
    dns_records: "{{ subnet_dns_records | default(omit) }}"
    allow_requests: "{{ subnet_allow_requests | default(omit) }}"
    scan_agent: "{{ subnet_scan_agent | default(omit) }}"
    ping_subnet: "{{ subnet_ping_subnet | default(omit) }}"
    discover_subnet: "{{ subnet_discover_subnet | default(omit) }}"
    is_folder: "{{ subnet_is_folder | default(omit) }}"
    is_full: "{{ subnet_is_full | default(omit) }}"
    subnet_state: "{{ subnet_subnet_state | default(omit) }}"
    threshold: "{{ subnet_threshold | default(omit) }}"
    location: "{{ subnet_location | default(omit) }}"
    state: "{{ subnet_state | default('present') }}"
