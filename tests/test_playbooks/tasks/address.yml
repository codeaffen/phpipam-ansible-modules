---
- name: "Ensure state of ip address: {{ name }}"
  address:
    server_url: "{{ phpipam_server_url }}"
    app_id: "{{ phpipam_app_id }}"
    username: "{{ phpipam_username }}"
    password: "{{ phpipam_password }}"
    subnet: "{{ address.subnet }}"
    ipaddress: "{{ address.ipaddress }}"
    is_gateway: "{{ address.is_gateway | default(omit) }}"
    description: "{{ address.description | default(omit) }}"
    mac_address: "{{ address.mac_address | default(omit) }}"
    owner: "{{ address.owner | default(omit) }}"
    tag: "{{ address.tag | default(omit) }}"
    ignore_ptr: "{{ address.ignore_ptr | default(omit) }}"
    ptr: "{{ address.ptr | default(omit) }}"
    device: "{{ address.device | default(omit) }}"
    port: "{{ address.port | default(omit) }}"
    note: "{{ address.note | default(omit) }}"
    exclude_ping: "{{ address.exclude_ping | default(omit) }}"
    state: "{{ address.state | default('present') }}"
